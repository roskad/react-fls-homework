import { useState, useEffect } from "react";
import useDebounce from "./useDebounce";

const data = ["–ê–ª—á–µ–≤—Å—å–∫", "–ë–∞–ª–∞–∫–ª—ñ—è", "–ë–∞—Ä", "–ë–∞—Ç—É—Ä–∏–Ω", "–ë–∞—Ö–º–∞—á", "–ë–∞—Ö–º—É—Ç", "–ë–µ—Ä–¥–∏—á—ñ–≤", "–ë–µ—Ä–¥—è–Ω—Å—å–∫", "–ë–µ—Ä–µ–≥–æ–≤–µ", "–ë—ñ–ª–∞ –¶–µ—Ä–∫–≤–∞", "–ë—ñ–ª–≥–æ—Ä–æ–¥-–î–Ω—ñ—Å—Ç—Ä–æ–≤—Å—å–∫–∏–π", "–ë–æ—Ä–∏—Å–ø—ñ–ª—å", "–ë–æ—Ä–∏—Å–ª–∞–≤", "–ë–æ—è—Ä–∫–∞", "–ë—Ä–æ–≤–∞—Ä–∏", "–ë—É—á–∞", "–í–∞—Ä–∞—à", "–í–∞—Å–∏–ª—å–∫—ñ–≤", "–í—ñ–Ω–Ω–∏—Ü—è", "–í–∏—à–≥–æ—Ä–æ–¥", "–í–∏—à–Ω–µ–≤–µ", "–í–æ–∑–Ω–µ—Å–µ–Ω—Å—å–∫", "–í–æ–ª–Ω–æ–≤–∞—Ö–∞", "–í–æ–ª–æ–¥–∏–º–∏—Ä", "–ì–∞–¥—è—á", "–ì–µ–Ω—ñ—á–µ—Å—å–∫", "–ì–ª—É—Ö—ñ–≤", "–ì–Ω—ñ–≤–∞–Ω—å", "–ì–æ—Ä—ñ—à–Ω—ñ –ü–ª–∞–≤–Ω—ñ", "–ì–æ—Ä–ª—ñ–≤–∫–∞", "–ì–æ—Ä–æ–¥–∏—â–µ", "–ì–æ—Å—Ç–æ–º–µ–ª—å", "–î–Ω—ñ–ø—Ä–æ", "–î–æ–±—Ä–æ–ø—ñ–ª–ª—è", "–î—Ä–æ–≥–æ–±–∏—á", "–î—É–±–Ω–æ", "–î—É–Ω–∞—ó–≤—Ü—ñ", "–ï–Ω–µ—Ä–≥–æ–¥–∞—Ä", "–ñ–∞—à–∫—ñ–≤", "–ñ–∏—Ç–æ–º–∏—Ä", "–ñ–º–µ—Ä–∏–Ω–∫–∞", "–ó–∞–ª—ñ—â–∏–∫–∏", "–ó–∞–ø–æ—Ä—ñ–∂–∂—è", "–ó–∞—Å—Ç–∞–≤–Ω–∞", "–ó–≤–µ–Ω–∏–≥–æ—Ä–æ–¥–∫–∞", "–ó–¥–æ–ª–±—É–Ω—ñ–≤", "–ó–µ–ª–µ–Ω–æ–¥–æ–ª—å—Å—å–∫", "–ó–º—ñ—ó–≤", "–ó–æ–ª–æ—Ç–æ–Ω–æ—à–∞", "–ó–æ–ª–æ—á—ñ–≤", "–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫", "–Ü–∑–º–∞—ó–ª", "–Ü–∑—é–º", "–Ü–ª–ª—ñ–Ω—Ü—ñ", "–Ü—Ä–ø—ñ–Ω—å", "–Ü—á–Ω—è", "–ö–∞–º‚Äô—è–Ω–µ—Ü—å-–ü–æ–¥—ñ–ª—å—Å—å–∫–∏–π", "–ö–∞–Ω—ñ–≤", "–ö–∞—Ä–ª—ñ–≤–∫–∞", "–ö–∞—Ö–æ–≤–∫–∞", "–ö–∏—ó–≤", "–ö–æ–≤–µ–ª—å", "–ö–æ–¥–∏–º–∞", "–ö–æ–∑—è—Ç–∏–Ω", "–ö–æ–ª–æ–º–∏—è", "–ö–æ–Ω–æ—Ç–æ–ø", "–ö–æ—Ä–µ—Ü—å", "–ö–æ—Ä–æ—Å—Ç–µ–Ω—å", "–ö–æ—Ä—Å—É–Ω—å-–®–µ–≤—á–µ–Ω–∫—ñ–≤—Å—å–∫–∏–π", "–ö—Ä–∞–º–∞—Ç–æ—Ä—Å—å–∫", "–ö—Ä–∞—Å–∏–ª—ñ–≤", "–ö—Ä–µ–º–µ–Ω—á—É–∫", "–ö—Ä–∏–≤–∏–π –†—ñ–≥", "–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π", "–ö—É–∑–Ω–µ—Ü–æ–≤—Å—å–∫", "–õ–∞–¥–∏–∂–∏–Ω", "–õ–∞–Ω—ñ–≤—Ü—ñ", "–õ–µ–±–µ–¥–∏–Ω", "–õ–∏—Å–∏—á–∞–Ω—Å—å–∫", "–õ–æ–∑–æ–≤–∞", "–õ—É–±–Ω–∏", "–õ—É–≥–∞–Ω—Å—å–∫", "–õ—É—Ü—å–∫", "–õ—å–≤—ñ–≤", "–ú–∏—Ä–≥–æ—Ä–æ–¥", "–ú–æ–≥–∏–ª—ñ–≤-–ü–æ–¥—ñ–ª—å—Å—å–∫–∏–π", "–ú–∏–∫–æ–ª–∞—ó–≤", "–ú—É–∫–∞—á–µ–≤–æ", "–ù—ñ–∂–∏–Ω", "–ù—ñ–∫–æ–ø–æ–ª—å", "–ù–æ–≤–æ–≤–æ–ª–∏–Ω—Å—å–∫", "–ù–æ–≤–æ–º–∏—Ä–≥–æ—Ä–æ–¥", "–ù–æ–≤–æ–º–æ—Å–∫–æ–≤—Å—å–∫", "–ù–æ–≤–æ—É–∫—Ä–∞—ó–Ω–∫–∞", "–û–≤—Ä—É—á", "–û–¥–µ—Å–∞", "–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ—è", "–û—Ö—Ç–∏—Ä–∫–∞", "–ü–µ—Ä–≤–æ–º–∞–π—Å—å–∫", "–ü–µ—Ä–µ—è—Å–ª–∞–≤"];

function Search() {
	const [searchTerm, setSearchTerm] = useState("");
	const debouncedSearchTerm = useDebounce(searchTerm, 500);
	const [results, setResults] = useState([]);

	let searchResult;

	useEffect(() => {
		if (debouncedSearchTerm) {
			setResults(search(debouncedSearchTerm));
		} else {
			setResults([]);
		}
	}, [debouncedSearchTerm]);

	const search = (query) => {
		return data.filter((item) => item.toLowerCase().startsWith(query.toLowerCase()));
	};

	if (results.length === 0 && debouncedSearchTerm) {
		searchResult = <p>–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ üôÅ</p>;
	} else {
		searchResult = (
			<ul className="pl-6 list-disc">
				{results.map((item, i) => (
					<li key={i} className="not-last:mb-2">
						{item}
					</li>
				))}
			</ul>
		);

		// ?? –ù–µ —Ä–æ–∑—É–º—ñ—é —á–æ–º—É —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—Ä–∏—á—ñ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ ‚Üì. –¶–µ –∂ –æ–∑–Ω–∞—á–∞—î —â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç—Ä–∏—á—ñ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è?
		// console.log(search(debouncedSearchTerm));

		return (
			<>
				<h2 className="mb-4 text-2xl font-bold">–ü–æ—à—É–∫ –ø–æ –º—ñ—Å—Ç–∞—Ö –£–∫—Ä–∞—ó–Ω–∏:</h2>
				<input type="text" placeholder="–ü–æ—à—É–∫..." value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className="border-b border-solid border-gray-400 focus:outline-none focus:border-[var(--accent)]" />
				<div className="h-96 mt-3 overflow-auto">{searchResult}</div>
			</>
		);
	}
}

export default Search;
